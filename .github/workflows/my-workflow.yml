on: 
  pull_request: {}
  push: {}
  workflow_dispatch: {}

jobs:
  my-job:
    runs-on: ubuntu-22.04
    steps:
      - name: my-step
        run: |
          ls
          echo ${{github.run_attempt}}
          echo ${{github.run_number}}
          echo ${{github.event.pull_request.number}}
          echo ${{github.ref_name}}
          echo ${{github.sha}}
          echo ${{toJson(github.ref)}}
          gh api graphql -f query='{
            repository(owner: "wild-nyankoman",name: "my-inspection") {
              pullRequests(states: [OPEN], first: 100, orderBy: { field: UPDATED_AT, direction: DESC }) {
                nodes {
                  baseRefName
                  baseRefOid
                  headRefName
                  headRefOid
                  potentialMergeCommit {
                    message
                    oid
                  }
                }
              }
            }
          }'
        if: ${{github.run_attempt == 1}}
        env:
          GH_TOKEN: ${{ github.token }}